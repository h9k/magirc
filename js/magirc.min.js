function openChanMenu(e){menu.data("channel",$(e).parent().parent().attr("id"));if(menu.is(":visible")){menu.hide();return false}menu.show();menu.position({my:"right top",at:"right bottom",of:e});$(document).one("click",function(){menu.hide()});return false}function getUserStatus(e){if(e["away"])return'<img src="theme/'+theme+'/img/status/user-away.png" alt="away" title="'+mLang.AwayAs+" "+e["nickname"]+'" />';else if(e["online"])return'<img src="theme/'+theme+'/img/status/user-online.png" alt="online" title="'+mLang.OnlineAs+" "+e["nickname"]+'" />';else return'<img src="theme/'+theme+'/img/status/user-offline.png" alt="offline" title="'+mLang.Offline+'" />'}function getUserExtra(e){var t="";if(e["bot"])t+=' <img src="theme/'+theme+'/img/status/bot.png" alt="bot" title="'+mLang.Bot+'" />';if(e["service"])t+=' <img src="theme/'+theme+'/img/status/service.png" alt="service" title="'+mLang.Service+'" />';if(e["operator"])t+=' <img src="theme/'+theme+'/img/status/operator.png" alt="oper" title="'+e["operator_level"]+'" />';if(e["helper"])t+=' <img src="theme/'+theme+'/img/status/help.png" alt="help" title="'+mLang.Helper+'" />';return t}function getCountryFlag(e){if(e["country_code"]!=null&&e["country_code"]!=""&&e["country_code"]!="??"&&e["country_code"]!="local"){var t=e.city?e.city+", "+e.region+", "+e["country"]:e["country"];return'<img src="theme/'+theme+"/img/flags/"+e["country_code"].toLowerCase()+'.png" alt="'+e["country_code"]+'" title="'+t+'" />'}else{return'<img src="theme/'+theme+'/img/flags/unknown.png" alt="Unknown" title="'+mLang.Unknown+'" />'}}function getChannelLinks(e){if(net_roundrobin||service_webchat){return'<button type="button" title="'+mLang.Join+'..." class="chanbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icons" style="height:18px; width:30px; margin:0; vertical-align:middle;"><span class="ui-button-icon-secondary ui-icon ui-icon-triangle-1-s"></span></button>'}else{return""}}function getTimeElapsed(e){var t=Math.floor(e/86400);var n=Math.floor((e-t*86400)/3600);var r=Math.floor((e-t*86400-n*3600)/60);return t+" "+mLang.Days+" "+n+" "+mLang.Hours+" "+r+" "+mLang.Minutes}function escapeTags(e){return e.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var menu;$(document).ready(function(){function e(e,t){var n=e.split(" ");var r=n[1].split(":");n=n[0].split(t);return(n[2]+n[1]+n[0]+r[0]+r[1]+r[2])*1}$("#loading").ajaxStart(function(){$(this).show()}).ajaxStop(function(){$(this).hide()});$("#locale").change(function(e){$.cookie("magirc_locale",$("#locale").val(),{expires:30,path:"/"});window.location.reload()});$.format.date.defaultShortDateFormat="dd/MM/yyyy";$.format.date.defaultLongDateFormat="dd/MM/yyyy hh:mm:ss";$(".shortDateFormat").each(function(e,t){if($(t).is(":input")){$(t).val($.format.date($(t).val(),$.format.date.defaultShortDateFormat))}else{$(t).text($.format.date($(t).text(),$.format.date.defaultShortDateFormat))}});$(".longDateFormat").each(function(e,t){if($(t).is(":input")){$(t).val($.format.date($(t).val(),$.format.date.defaultLongDateFormat))}else{$(t).text($.format.date($(t).text(),$.format.date.defaultLongDateFormat))}});$.extend($.fn.dataTable.defaults,{processing:false,serverSide:false,jQueryUI:true,autoWidth:false,pagingType:"full_numbers",language:mLang.DataTables,createdRow:function(e,t,n){for(var r=1;r<4;r++)$("td:eq("+r+")",e).text(t[r])}});$.fn.dataTableExt.sErrMode="throw";$.fn.dataTableExt.aTypes.unshift(function(e){if(e!==null&&typeof e=="string"){if(e.match(/^(0[1-9]|[12][0-9]|3[01])\.(0[1-9]|1[012])\.(19|20|21)\d\d ([01][0-9]|2[0-4])\:([0-5][0-9])\:([0-5][0-9])$/)){return"date-euro"}else if(e.match(/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[012])\/(19|20|21)\d\d ([01][0-9]|2[0-4])\:([0-5][0-9])\:([0-5][0-9])$/)){return"date-uk"}}return null});$.fn.dataTableExt.oSort["date-euro-asc"]=function(t,n){var r=e(t,".");var i=e(n,".");return r<i?-1:r>i?1:0};$.fn.dataTableExt.oSort["date-euro-desc"]=function(t,n){var r=e(t,".");var i=e(n,".");return r<i?1:r>i?-1:0};$.fn.dataTableExt.oSort["date-uk-asc"]=function(t,n){var r=e(t,"/");var i=e(n,"/");return r<i?-1:r>i?1:0};$.fn.dataTableExt.oSort["date-uk-desc"]=function(t,n){var r=e(t,"/");var i=e(n,"/");return r<i?1:r>i?-1:0};Highcharts.setOptions({global:{useUTC:false},chart:{backgroundColor:"transparent",type:"spline",marginRight:10,style:{fontFamily:"Share, cursive"},plotBackgroundColor:null,plotBorderWidth:null,plotShadow:false},title:{text:null},xAxis:{type:"datetime",tickPixelInterval:150,ordinal:true},yAxis:{title:{align:"low"},allowDecimals:false,plotLines:[{value:0,width:1,color:"#808080"}]},rangeSelector:{buttons:[{type:"day",count:1,text:mLang.zoom_1d},{type:"week",count:1,text:mLang.zoom_1w},{type:"month",count:1,text:mLang.zoom_1m},{type:"month",count:3,text:mLang.zoom_3m},{type:"month",count:6,text:mLang.zoom_6m},{type:"year",count:1,text:mLang.zoom_1y},{type:"all",text:mLang.zoom_All}],selected:3},tooltip:{valueDecimals:0,yDecimals:0,xDateFormat:format_datetime_charts},legend:{enabled:false},exporting:{enabled:false},navigation:{buttonOptions:{}},plotOptions:{spline:{lineWidth:2,states:{hover:{lineWidth:3}},marker:{enabled:false,states:{hover:{enabled:true,symbol:"circle",radius:5,lineWidth:1}}}},pie:{allowPointSelect:true,cursor:"pointer",dataLabels:{enabled:true,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+Math.round(this.percentage*100)/100+" %"}}},column:{dataLabels:{enabled:true,rotation:-90,x:3,y:-12}}},rangeSelector:{selected:4},credits:{enabled:false}});menu=$("#chanmenu").menu({select:function(e,t){$(this).hide();var n=encodeURIComponent(menu.data("channel"));switch(t.item.data("action")){case"irc":location.href="irc://"+net_roundrobin+":"+net_port+"/"+n.replace("%23","");break;case"ircs":location.href="irc://"+net_roundrobin+":+"+net_port_ssl+"/"+n.replace("%23","");break;case"webchat":location.href=service_webchat+n;break;case"mibbit":location.href="http://widget.mibbit.com/?settings="+service_mibbit+"&server="+net_roundrobin+"&channel="+n+"&promptPass=true";break}}}).hide().css({position:"absolute",zIndex:1});$(document).on("mouseenter",".chanbutton",function(e){$(this).removeClass("ui-state-default").addClass("ui-state-focus")});$(document).on("mouseleave",".chanbutton",function(e){$(this).removeClass("ui-state-focus").addClass("ui-state-default")})})